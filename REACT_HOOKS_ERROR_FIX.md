# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Rendered fewer hooks than expected"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

```
Error: Rendered fewer hooks than expected. This may be caused by an accidental early return statement.
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –∏–∑-–∑–∞ **—Ä–∞–Ω–Ω–µ–≥–æ return** –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–ª—Å—è **–¥–æ –≤—Å–µ—Ö —Ö—É–∫–æ–≤**. React —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –≤—Å–µ —Ö—É–∫–∏ –≤—ã–∑—ã–≤–∞–ª–∏—Å—å –≤ **–æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ** –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥:
```tsx
export default function UserProfile() {
  const { t } = useLanguage();                    // ‚úÖ –•—É–∫ 1
  const { token } = useSelector(...);             // ‚úÖ –•—É–∫ 2
  const [activeTab, setActiveTab] = useState();   // ‚úÖ –•—É–∫ 3
  
  // ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –†–∞–Ω–Ω–∏–π return –¥–æ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ö—É–∫–æ–≤
  if (!token && !localStorage.getItem('token')) {
    return <Navigate to="/" replace />;           // ‚ùå –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥!
  }
  
  const [isEditing, setIsEditing] = useState();   // ‚ùå –•—É–∫ 4 - –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–∏ —Ä–∞–Ω–Ω–µ–º return
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ö—É–∫–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è
}
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ü–µ—Ä–µ–º–µ—Å—Ç–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ **–ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ö—É–∫–æ–≤**:

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:
```tsx
export default function UserProfile() {
  const { t } = useLanguage();                    // ‚úÖ –•—É–∫ 1
  const { token } = useSelector(...);             // ‚úÖ –•—É–∫ 2
  const [activeTab, setActiveTab] = useState();   // ‚úÖ –•—É–∫ 3
  const [isEditing, setIsEditing] = useState();   // ‚úÖ –•—É–∫ 4
  const [isChangePasswordOpen, ...] = useState(); // ‚úÖ –•—É–∫ 5
  const [isDeleteAccountOpen, ...] = useState();  // ‚úÖ –•—É–∫ 6
  
  const { data: profile, ... } = useGetProfileQuery(); // ‚úÖ –•—É–∫ 7
  React.useEffect(() => { ... }, []);             // ‚úÖ –•—É–∫ 8
  const { data: stats, ... } = useGetUserStatsQuery(); // ‚úÖ –•—É–∫ 9
  const [updateProfile, ...] = useUpdateProfileMutation(); // ‚úÖ –•—É–∫ 10
  const [updateAvatar, ...] = useUpdateAvatarMutation();   // ‚úÖ –•—É–∫ 11
  const [changePassword, ...] = useChangePasswordMutation(); // ‚úÖ –•—É–∫ 12
  const [deleteAccount, ...] = useDeleteAccountMutation();   // ‚úÖ –•—É–∫ 13
  
  const [formData, setFormData] = useState({...}); // ‚úÖ –•—É–∫ 14
  const [passwordData, setPasswordData] = useState({...}); // ‚úÖ –•—É–∫ 15
  const [deleteData, setDeleteData] = useState({...}); // ‚úÖ –•—É–∫ 16
  React.useEffect(() => { ... }, [profile]);      // ‚úÖ –•—É–∫ 17
  
  // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ü–û–°–õ–ï –≤—Å–µ—Ö —Ö—É–∫–æ–≤
  if (!token && !localStorage.getItem('token')) {
    return <Navigate to="/" replace />;
  }
  
  // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞...
}
```

## üéØ –ü—Ä–∞–≤–∏–ª–∞ —Ö—É–∫–æ–≤ React

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
1. **–í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Ö—É–∫–∏** –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
2. **–ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Ö—É–∫–∏** –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤, —É—Å–ª–æ–≤–∏–π –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
3. **–í—Å–µ —Ö—É–∫–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è** –≤ –æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
4. **–£—Å–ª–æ–≤–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ü–û–°–õ–ï –≤—Å–µ—Ö —Ö—É–∫–æ–≤

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```tsx
// ‚ùå –†–∞–Ω–Ω–∏–π return –¥–æ —Ö—É–∫–æ–≤
if (condition) {
  return <div>Early return</div>;
}
const [state, setState] = useState();

// ‚ùå –•—É–∫–∏ –≤ —É—Å–ª–æ–≤–∏—è—Ö
if (condition) {
  const [state, setState] = useState();
}

// ‚ùå –•—É–∫–∏ –≤ —Ü–∏–∫–ª–∞—Ö
for (let i = 0; i < items.length; i++) {
  const [state, setState] = useState();
}
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚ùå `Rendered fewer hooks than expected`
- ‚úÖ –í—Å–µ —Ö—É–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –í—Å–µ —Ö—É–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è

## üìã Best Practices

### –î–ª—è –±—É–¥—É—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
1. **–í—Å–µ–≥–¥–∞ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ —Ö—É–∫–∏** –≤ –Ω–∞—á–∞–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
2. **–£—Å–ª–æ–≤–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã** —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ö—É–∫–æ–≤
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useMemo/useCallback** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –Ω–æ –Ω–µ –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ö—É–∫–æ–≤
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é** —á–µ—Ä–µ–∑ useEffect, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —É—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
```tsx
function MyComponent() {
  // 1. –í—Å–µ —Ö—É–∫–∏ –≤ –Ω–∞—á–∞–ª–µ
  const [state1, setState1] = useState();
  const [state2, setState2] = useState();
  const data = useQuery();
  useEffect(() => { ... }, []);
  
  // 2. –£—Å–ª–æ–≤–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã –ø–æ—Å–ª–µ —Ö—É–∫–æ–≤
  if (!data) return <Loading />;
  if (!authorized) return <Navigate to="/login" />;
  
  // 3. –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  return <div>Component content</div>;
}
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üöÄ
